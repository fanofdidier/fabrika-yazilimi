{"ast":null,"code":"import _objectSpread from\"/Users/hakankarahan/Desktop/fabrikayazilimi/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import LoadingSpinner from'../UI/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRoles=null,requiredPermissions=null}=_ref;const{user,loading,isAuthenticated,hasRole,hasPermission}=useAuth();const location=useLocation();// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-gray-600\",children:\"Yetkilendirme kontrol ediliyor...\"})]})});}// Redirect to login if not authenticated\nif(!isAuthenticated||!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location.pathname},replace:true});}// Check role-based access\nif(requiredRoles&&!hasRole(requiredRoles)){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md w-full text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-8 w-8 text-red-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Eri\\u015Fim Yetkisi Yok\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-6\",children:\"Bu sayfaya eri\\u015Fim i\\xE7in gerekli yetkiniz bulunmuyor.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),className:\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\",children:\"Geri D\\xF6n\"}),/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})]})]})})});}// Check permission-based access\nif(requiredPermissions){const hasRequiredPermissions=Array.isArray(requiredPermissions)?requiredPermissions.every(permission=>hasPermission(permission)):hasPermission(requiredPermissions);if(!hasRequiredPermissions){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md w-full text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-6\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-8 w-8 text-yellow-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Yetersiz \\u0130zin\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-6\",children:\"Bu i\\u015Flemi ger\\xE7ekle\\u015Ftirmek i\\xE7in gerekli izniniz bulunmuyor.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),className:\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\",children:\"Geri D\\xF6n\"}),/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})]})]})})});}}// User has access, render the protected content\nreturn children;};// Higher-order component for role-based protection\nexport const withRoleProtection=(Component,requiredRoles)=>{return function ProtectedComponent(props){return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRoles:requiredRoles,children:/*#__PURE__*/_jsx(Component,_objectSpread({},props))});};};// Higher-order component for permission-based protection\nexport const withPermissionProtection=(Component,requiredPermissions)=>{return function ProtectedComponent(props){return/*#__PURE__*/_jsx(ProtectedRoute,{requiredPermissions:requiredPermissions,children:/*#__PURE__*/_jsx(Component,_objectSpread({},props))});};};// Admin only route\nexport const AdminRoute=_ref2=>{let{children}=_ref2;return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRoles:['admin'],children:children});};// Store staff route (admin + store staff)\nexport const StoreStaffRoute=_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRoles:['admin','magaza_personeli'],children:children});};// Factory worker route (admin + factory worker)\nexport const FactoryWorkerRoute=_ref4=>{let{children}=_ref4;return/*#__PURE__*/_jsx(ProtectedRoute,{requiredRoles:['admin','fabrika_iscisi'],children:children});};// Any authenticated user route\nexport const AuthenticatedRoute=_ref5=>{let{children}=_ref5;return/*#__PURE__*/_jsx(ProtectedRoute,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","requiredRoles","requiredPermissions","user","loading","isAuthenticated","hasRole","hasPermission","location","className","size","to","state","from","pathname","replace","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","window","history","back","hasRequiredPermissions","Array","isArray","every","permission","withRoleProtection","Component","ProtectedComponent","props","_objectSpread","withPermissionProtection","AdminRoute","_ref2","StoreStaffRoute","_ref3","FactoryWorkerRoute","_ref4","AuthenticatedRoute","_ref5"],"sources":["/Users/hakankarahan/Desktop/fabrikayazilimi/frontend/src/components/Auth/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../UI/LoadingSpinner';\n\nconst ProtectedRoute = ({ children, requiredRoles = null, requiredPermissions = null }) => {\n  const { user, loading, isAuthenticated, hasRole, hasPermission } = useAuth();\n  const location = useLocation();\n\n  // Show loading spinner while checking authentication\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <LoadingSpinner size=\"lg\" />\n          <p className=\"mt-4 text-sm text-gray-600\">Yetkilendirme kontrol ediliyor...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated || !user) {\n    return (\n      <Navigate \n        to=\"/login\" \n        state={{ from: location.pathname }} \n        replace \n      />\n    );\n  }\n\n  // Check role-based access\n  if (requiredRoles && !hasRole(requiredRoles)) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full text-center\">\n          <div className=\"bg-white rounded-lg shadow-lg p-8\">\n            <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6\">\n              <svg \n                className=\"h-8 w-8 text-red-600\" \n                fill=\"none\" \n                viewBox=\"0 0 24 24\" \n                stroke=\"currentColor\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" \n                />\n              </svg>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              Erişim Yetkisi Yok\n            </h3>\n            <p className=\"text-sm text-gray-600 mb-6\">\n              Bu sayfaya erişim için gerekli yetkiniz bulunmuyor.\n            </p>\n            <div className=\"space-y-3\">\n              <button\n                onClick={() => window.history.back()}\n                className=\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\"\n              >\n                Geri Dön\n              </button>\n              <Navigate to=\"/dashboard\" replace />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Check permission-based access\n  if (requiredPermissions) {\n    const hasRequiredPermissions = Array.isArray(requiredPermissions)\n      ? requiredPermissions.every(permission => hasPermission(permission))\n      : hasPermission(requiredPermissions);\n\n    if (!hasRequiredPermissions) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"max-w-md w-full text-center\">\n            <div className=\"bg-white rounded-lg shadow-lg p-8\">\n              <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-6\">\n                <svg \n                  className=\"h-8 w-8 text-yellow-600\" \n                  fill=\"none\" \n                  viewBox=\"0 0 24 24\" \n                  stroke=\"currentColor\"\n                >\n                  <path \n                    strokeLinecap=\"round\" \n                    strokeLinejoin=\"round\" \n                    strokeWidth={2} \n                    d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" \n                  />\n                </svg>\n              </div>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                Yetersiz İzin\n              </h3>\n              <p className=\"text-sm text-gray-600 mb-6\">\n                Bu işlemi gerçekleştirmek için gerekli izniniz bulunmuyor.\n              </p>\n              <div className=\"space-y-3\">\n                <button\n                  onClick={() => window.history.back()}\n                  className=\"w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\"\n                >\n                  Geri Dön\n                </button>\n                <Navigate to=\"/dashboard\" replace />\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  // User has access, render the protected content\n  return children;\n};\n\n// Higher-order component for role-based protection\nexport const withRoleProtection = (Component, requiredRoles) => {\n  return function ProtectedComponent(props) {\n    return (\n      <ProtectedRoute requiredRoles={requiredRoles}>\n        <Component {...props} />\n      </ProtectedRoute>\n    );\n  };\n};\n\n// Higher-order component for permission-based protection\nexport const withPermissionProtection = (Component, requiredPermissions) => {\n  return function ProtectedComponent(props) {\n    return (\n      <ProtectedRoute requiredPermissions={requiredPermissions}>\n        <Component {...props} />\n      </ProtectedRoute>\n    );\n  };\n};\n\n// Admin only route\nexport const AdminRoute = ({ children }) => (\n  <ProtectedRoute requiredRoles={['admin']}>\n    {children}\n  </ProtectedRoute>\n);\n\n// Store staff route (admin + store staff)\nexport const StoreStaffRoute = ({ children }) => (\n  <ProtectedRoute requiredRoles={['admin', 'magaza_personeli']}>\n    {children}\n  </ProtectedRoute>\n);\n\n// Factory worker route (admin + factory worker)\nexport const FactoryWorkerRoute = ({ children }) => (\n  <ProtectedRoute requiredRoles={['admin', 'fabrika_iscisi']}>\n    {children}\n  </ProtectedRoute>\n);\n\n// Any authenticated user route\nexport const AuthenticatedRoute = ({ children }) => (\n  <ProtectedRoute>\n    {children}\n  </ProtectedRoute>\n);\n\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}