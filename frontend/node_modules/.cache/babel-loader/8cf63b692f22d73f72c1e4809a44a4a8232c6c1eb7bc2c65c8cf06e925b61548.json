{"ast":null,"code":"import _objectSpread from\"/Users/hakankarahan/Desktop/fabrikayazilimi/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{Card,Button,Input,LoadingSpinner}from'../../components/UI';import VoiceRecorder from'../../components/UI/VoiceRecorder';import VoicePlayer from'../../components/UI/VoicePlayer';import{useAuth}from'../../contexts/AuthContext';import{useNotification}from'../../contexts/NotificationContext';import{useSocket}from'../../contexts/SocketContext';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OrderDetailPage=()=>{const{id}=useParams();const{user}=useAuth();const{fetchNotifications}=useNotification();const{socket,connected}=useSocket();const[order,setOrder]=useState(null);const[loading,setLoading]=useState(true);const[isEditing,setIsEditing]=useState(false);const[editForm,setEditForm]=useState({});const[responseStatus,setResponseStatus]=useState('');const[responseNote,setResponseNote]=useState('');const[isSendingResponse,setIsSendingResponse]=useState(false);// Ses kaydƒ± state'leri\nconst[voiceRecording,setVoiceRecording]=useState(null);const[hasVoiceRecording,setHasVoiceRecording]=useState(false);const canEdit=user&&(user.role==='admin'||user.role==='manager');// Helper functions\nconst formatDate=dateString=>{if(!dateString)return'-';const date=new Date(dateString);return date.toLocaleDateString('tr-TR',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});};// Status label helper\nconst getStatusLabel=status=>{const statusLabels={'siparis_kabul_edildi':'‚úÖ Sipari≈ü Kabul Edildi','siparis_reddedildi':'‚ùå Sipari≈ü Reddedildi','ek_bilgi_gerekli':'‚ÑπÔ∏è Ek Bilgi Gerekli','teslim_tarihi_deƒüi≈üti':'üìÖ Teslim Tarihi Deƒüi≈üti','fiyat_teklifi':'üí∞ Fiyat Teklifi'};return statusLabels[status]||status;};const loadOrder=async()=>{try{setLoading(true);const response=await api.get(\"/orders/\".concat(id));const apiOrder=response.data.data.order;const orderData=_objectSpread(_objectSpread({},apiOrder),{},{timeline:apiOrder.timeline||[{id:1,type:'created',description:'Sipari≈ü sisteme kaydedildi',timestamp:apiOrder.createdAt,user:apiOrder.createdBy?\"\".concat(apiOrder.createdBy.firstName||'',\" \").concat(apiOrder.createdBy.lastName||'').trim()||apiOrder.createdBy.username:'Sistem'}],responses:apiOrder.responses||[]});setOrder(orderData);setEditForm(orderData);// Debug: Timeline verilerini kontrol et\nconsole.log('üé§ Order timeline data:',orderData.timeline);const voiceEntries=orderData.timeline.filter(entry=>entry.voiceRecording);console.log('üé§ Timeline entries with voice recording:',voiceEntries);}catch(error){console.error('Order load error:',error);}finally{setLoading(false);}};useEffect(()=>{loadOrder();},[id]);// Socket.io real-time g√ºncellemeleri\nuseEffect(()=>{console.log('Socket useEffect √ßalƒ±≈ütƒ±:',{socket:!!socket,connected,id,socketId:socket===null||socket===void 0?void 0:socket.id,socketConnected:socket===null||socket===void 0?void 0:socket.connected});// Socket varsa event listener'larƒ± ekle\nif(socket){console.log('Socket event listener\\'larƒ± ekleniyor...');// Sipari≈ü g√ºncellemelerini dinle\nconst handleOrderUpdated=data=>{console.log('üîî orderUpdated event alƒ±ndƒ±:',data);console.log('üîç Kar≈üƒ±la≈ütƒ±rma:',{receivedId:data.orderId,currentId:id,match:data.orderId===id});if(data.orderId===id){console.log('‚úÖ Sipari≈ü g√ºncellendi, sayfa yenileniyor:',data);// Sipari≈üi yeniden y√ºkle\nloadOrder();// Bildirimleri yenile\nfetchNotifications();}else{console.log('‚ùå Farklƒ± sipari≈ü ID\\'si, g√ºncelleme yapƒ±lmƒ±yor');}};// Yeni bildirimleri dinle\nconst handleNewNotification=notification=>{console.log('üîî newNotification event alƒ±ndƒ±:',notification);// Bildirimleri yenile\nfetchNotifications();};socket.on('orderUpdated',handleOrderUpdated);socket.on('newNotification',handleNewNotification);// Cleanup\nreturn()=>{console.log('Socket event listener\\'larƒ± temizleniyor...');socket.off('orderUpdated',handleOrderUpdated);socket.off('newNotification',handleNewNotification);};}else{console.log('Socket event listener\\'larƒ± eklenmedi - socket yok:',{socket:!!socket,connected,socketConnected:socket===null||socket===void 0?void 0:socket.connected});}},[socket,id]);// connected dependency'sini de kaldƒ±rdƒ±k\n// Alternatif: Socket baƒülantƒ±sƒ± olmasa bile event listener'larƒ± ekle\nuseEffect(()=>{console.log('Alternatif Socket useEffect √ßalƒ±≈ütƒ±:',{socket:!!socket,connected,id,socketId:socket===null||socket===void 0?void 0:socket.id,socketConnected:socket===null||socket===void 0?void 0:socket.connected});// Socket varsa event listener'larƒ± ekle\nif(socket){console.log('Alternatif Socket event listener\\'larƒ± ekleniyor...');// Sipari≈ü g√ºncellemelerini dinle\nconst handleOrderUpdated=data=>{console.log('Alternatif orderUpdated event alƒ±ndƒ±:',data);console.log('Alternatif Kar≈üƒ±la≈ütƒ±rma:',{receivedId:data.orderId,currentId:id,match:data.orderId===id});if(data.orderId===id){console.log('Alternatif Sipari≈ü g√ºncellendi, sayfa yenileniyor:',data);// Sipari≈üi yeniden y√ºkle\nloadOrder();// Bildirimleri yenile\nfetchNotifications();}};// Yeni bildirimleri dinle\nconst handleNewNotification=notification=>{console.log('Alternatif newNotification event alƒ±ndƒ±:',notification);// Bildirimleri yenile\nfetchNotifications();};socket.on('orderUpdated',handleOrderUpdated);socket.on('newNotification',handleNewNotification);// Cleanup\nreturn()=>{console.log('Alternatif Socket event listener\\'larƒ± temizleniyor...');socket.off('orderUpdated',handleOrderUpdated);socket.off('newNotification',handleNewNotification);};}},[id]);// Sadece id dependency'si\nconst handleEdit=()=>{setIsEditing(true);setEditForm(_objectSpread({},order));};const handleSave=async()=>{try{await api.put(\"/orders/\".concat(id),editForm);await loadOrder();setIsEditing(false);}catch(error){console.error('Update error:',error);}};const handleCancel=()=>{setIsEditing(false);setEditForm(_objectSpread({},order));};// Ses kaydƒ± handler'larƒ±\nconst handleVoiceRecordingComplete=audioBlob=>{setVoiceRecording(audioBlob);setHasVoiceRecording(true);};const handleVoiceRecordingDelete=()=>{setVoiceRecording(null);setHasVoiceRecording(false);};const handleSendResponse=async()=>{if(!responseStatus)return;try{setIsSendingResponse(true);// Debug log\nconsole.log('üì§ Sending response:',{status:responseStatus,note:responseNote,hasVoiceRecording:!!voiceRecording});// Ses kaydƒ± varsa FormData, yoksa normal JSON g√∂nder\nif(voiceRecording){// FormData olu≈ütur\nconst formData=new FormData();formData.append('status',responseStatus);formData.append('note',responseNote);formData.append('voiceRecording',voiceRecording,'voice-recording.webm');// FormData i√ßeriƒüini logla\nconsole.log('üì§ FormData contents:');for(let[key,value]of formData.entries()){console.log(\"  \".concat(key,\":\"),value);}await api.post(\"/orders/\".concat(id,\"/responses\"),formData,{headers:{'Content-Type':'multipart/form-data'}});}else{// Normal JSON g√∂nder\nconsole.log('üì§ Sending JSON data:',{status:responseStatus,note:responseNote});await api.post(\"/orders/\".concat(id,\"/responses\"),{status:responseStatus,note:responseNote});}// Form'u temizle\nsetResponseStatus('');setResponseNote('');setVoiceRecording(null);setHasVoiceRecording(false);await loadOrder();await fetchNotifications();}catch(error){console.error('Send response error:',error);}finally{setIsSendingResponse(false);}};const handleStatusUpdate=async newStatus=>{try{await api.put(\"/orders/\".concat(id,\"/status\"),{status:newStatus});await loadOrder();}catch(error){console.error('Status update error:',error);// API hatasƒ± durumunda local olarak g√ºncelle\nconst updatedOrder=_objectSpread(_objectSpread({},order),{},{status:newStatus});setOrder(updatedOrder);setEditForm(updatedOrder);// Add to timeline\nconst newTimelineEntry={id:order.timeline.length+1,status:newStatus,title:\"Durum \".concat(newStatus,\" olarak g\\xFCncellendi\"),description:\"Sipari\\u015F durumu \".concat(newStatus,\" olarak de\\u011Fi\\u015Ftirildi\"),timestamp:new Date().toISOString(),user:'Mevcut Kullanƒ±cƒ±'};updatedOrder.timeline.push(newTimelineEntry);setOrder(updatedOrder);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",text:\"Sipari\\u015F detaylar\\u0131 y\\xFCkleniyor...\"})});}if(!order){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Sipari\\u015F Bulunamad\\u0131\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Arad\\u0131\\u011F\\u0131n\\u0131z sipari\\u015F mevcut de\\u011Fil.\"}),/*#__PURE__*/_jsx(Link,{to:\"/orders\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Sipari\\u015Flere D\\xF6n\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Sipari\\u015F Detay\\u0131\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-2\",children:[\"Sipari\\u015F #\",order.orderNumber||id]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/orders\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",children:\"Geri D\\xF6n\"})}),canEdit&&/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleSave,children:\"Kaydet\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleCancel,children:\"\\u0130ptal\"})]}):/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleEdit,children:\"D\\xFCzenle\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium \".concat(order.status==='pending'?'bg-yellow-100 text-yellow-800':order.status==='confirmed'?'bg-green-100 text-green-800':order.status==='in_progress'?'bg-blue-100 text-blue-800':order.status==='completed'?'bg-green-100 text-green-800':order.status==='cancelled'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:order.status})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-12 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-3 space-y-6\",children:/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Sipari\\u015F Bilgileri\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\xDCr\\xFCn\"}),isEditing?/*#__PURE__*/_jsx(Input,{value:editForm.product,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{product:e.target.value}))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:order.product||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\xDCr\\xFCn Kodu\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:order.productCode||'-'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Miktar\"}),isEditing?/*#__PURE__*/_jsx(Input,{type:\"number\",value:editForm.quantity,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{quantity:parseInt(e.target.value)}))}):/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[order.quantity||0,\" adet\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Birim Fiyat\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[\"\\u20BA\",order.unitPrice?order.unitPrice.toFixed(2):'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Toplam Tutar\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-900\",children:[\"\\u20BA\",order.totalAmount?order.totalAmount.toFixed(2):'0.00']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Teslimat Tarihi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:formatDate(order.deliveryDate)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"A\\xE7\\u0131klama\"}),isEditing?/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\",rows:\"3\",value:editForm.description,onChange:e=>setEditForm(_objectSpread(_objectSpread({},editForm),{},{description:e.target.value}))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:order.description||'-'})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Sipari\\u015F Ge\\xE7mi\\u015Fi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-blue-500\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 17h5l-5 5v-5zM4.868 19.718A8.966 8.966 0 003 12a9 9 0 0118 0 8.966 8.966 0 00-1.868 7.718\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Ger\\xE7ek Zamanl\\u0131\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2 text-blue-500\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"Sipari\\u015F Ge\\xE7mi\\u015Fi\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:order.timeline&&order.timeline.length>0?order.timeline.map((entry,index)=>{// Kullanƒ±cƒ± tipine g√∂re renk belirle\nconst isAdmin=entry.user==='admin';const hasVoiceRecording=entry.voiceRecording&&entry.voiceRecording.filename;// Debug log\nif(hasVoiceRecording){console.log('üé§ Timeline entry with voice recording:',entry);}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3 p-3 rounded-lg \".concat(isAdmin?'bg-blue-50 border-l-4 border-blue-400':'bg-green-50 border-l-4 border-green-400'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full flex items-center justify-center \".concat(isAdmin?hasVoiceRecording?'bg-blue-600':'bg-blue-500':hasVoiceRecording?'bg-green-600':'bg-green-500'),children:hasVoiceRecording&&entry.voiceRecording&&entry.voiceRecording.filename?/*#__PURE__*/_jsx(\"svg\",{className:\"w-2 h-2 text-white\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\",clipRule:\"evenodd\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"w-1.5 h-1.5 bg-white rounded-full\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium \".concat(isAdmin?'text-blue-900':'text-green-900'),children:entry.description}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs \".concat(isAdmin?'text-blue-600':'text-green-600'),children:formatDate(entry.timestamp)}),entry.voiceRecording&&entry.voiceRecording.filename&&/*#__PURE__*/_jsx(VoicePlayer,{voiceRecording:entry.voiceRecording,userName:entry.user,timestamp:entry.timestamp})]})]},entry.id||index);}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 italic\",children:\"Hen\\xFCz ge\\xE7mi\\u015F kayd\\u0131 yok\"})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-5\",children:[/*#__PURE__*/_jsxs(Card,{className:\"p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Durum \\u0130\\u015Flemleri\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:canEdit&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"w-full\",onClick:()=>handleStatusUpdate('cancelled'),children:\"\\u0130ptal Et\"})})]}),/*#__PURE__*/_jsxs(Card,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"Sipari\\u015F Cevap Sistemi\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Sipari\\u015Fe Cevap Ver\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Durum Se\\xE7in\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\",value:responseStatus,onChange:e=>setResponseStatus(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Durum se\\xE7in...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"siparis_kabul_edildi\",children:\"\\u2705 Sipari\\u015F Kabul Edildi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"siparis_reddedildi\",children:\"\\u274C Sipari\\u015F Reddedildi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ek_bilgi_gerekli\",children:\"\\u2139\\uFE0F Ek Bilgi Gerekli\"}),/*#__PURE__*/_jsx(\"option\",{value:\"teslim_tarihi_de\\u011Fi\\u015Fti\",children:\"\\uD83D\\uDCC5 Teslim Tarihi De\\u011Fi\\u015Fti\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fiyat_teklifi\",children:\"\\uD83D\\uDCB0 Fiyat Teklifi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"not\",children:\"\\uD83D\\uDCDD NOT\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:responseStatus==='not'?'Not (Zorunlu)':'Not (Opsiyonel)'}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\",rows:\"3\",placeholder:\"Sipari\\u015F hakk\\u0131nda notlar\\u0131n\\u0131z\\u0131 yaz\\u0131n...\",value:responseNote,onChange:e=>setResponseNote(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uD83C\\uDFA4 Ses Kayd\\u0131 (Opsiyonel)\"}),/*#__PURE__*/_jsx(VoiceRecorder,{onRecordingComplete:handleVoiceRecordingComplete,onRecordingDelete:handleVoiceRecordingDelete}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:\"Ses kayd\\u0131 ile daha detayl\\u0131 a\\xE7\\u0131klama yapabilirsiniz. Hem yaz\\u0131l\\u0131 not hem de ses kayd\\u0131 g\\xF6nderebilirsiniz.\"})]}),/*#__PURE__*/_jsx(Button,{className:\"w-full\",variant:\"primary\",onClick:handleSendResponse,disabled:!responseStatus||isSendingResponse||responseStatus==='not'&&!responseNote.trim()&&!hasVoiceRecording,children:isSendingResponse?'G√∂nderiliyor...':'Cevabƒ± G√∂nder'})]})})]})]})]})]});};export default OrderDetailPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","Card","Button","Input","LoadingSpinner","VoiceRecorder","VoicePlayer","useAuth","useNotification","useSocket","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderDetailPage","id","user","fetchNotifications","socket","connected","order","setOrder","loading","setLoading","isEditing","setIsEditing","editForm","setEditForm","responseStatus","setResponseStatus","responseNote","setResponseNote","isSendingResponse","setIsSendingResponse","voiceRecording","setVoiceRecording","hasVoiceRecording","setHasVoiceRecording","canEdit","role","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","getStatusLabel","status","statusLabels","loadOrder","response","get","concat","apiOrder","data","orderData","_objectSpread","timeline","type","description","timestamp","createdAt","createdBy","firstName","lastName","trim","username","responses","console","log","voiceEntries","filter","entry","error","socketId","socketConnected","handleOrderUpdated","receivedId","orderId","currentId","match","handleNewNotification","notification","on","off","handleEdit","handleSave","put","handleCancel","handleVoiceRecordingComplete","audioBlob","handleVoiceRecordingDelete","handleSendResponse","note","formData","FormData","append","key","value","entries","post","headers","handleStatusUpdate","newStatus","updatedOrder","newTimelineEntry","length","title","toISOString","push","className","children","size","text","to","variant","orderNumber","onClick","product","onChange","e","target","productCode","quantity","parseInt","unitPrice","toFixed","totalAmount","deliveryDate","rows","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","index","isAdmin","filename","fillRule","clipRule","userName","placeholder","onRecordingComplete","onRecordingDelete","disabled"],"sources":["/Users/hakankarahan/Desktop/fabrikayazilimi/frontend/src/pages/Orders/OrderDetailPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Card, Button, Input, LoadingSpinner } from '../../components/UI';\nimport VoiceRecorder from '../../components/UI/VoiceRecorder';\nimport VoicePlayer from '../../components/UI/VoicePlayer';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNotification } from '../../contexts/NotificationContext';\nimport { useSocket } from '../../contexts/SocketContext';\nimport api from '../../services/api';\n\nconst OrderDetailPage = () => {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const { fetchNotifications } = useNotification();\n  const { socket, connected } = useSocket();\n  \n  const [order, setOrder] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editForm, setEditForm] = useState({});\n  const [responseStatus, setResponseStatus] = useState('');\n  const [responseNote, setResponseNote] = useState('');\n  const [isSendingResponse, setIsSendingResponse] = useState(false);\n  \n  // Ses kaydƒ± state'leri\n  const [voiceRecording, setVoiceRecording] = useState(null);\n  const [hasVoiceRecording, setHasVoiceRecording] = useState(false);\n\n  const canEdit = user && (user.role === 'admin' || user.role === 'manager');\n\n  // Helper functions\n  const formatDate = (dateString) => {\n    if (!dateString) return '-';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('tr-TR', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Status label helper\n  const getStatusLabel = (status) => {\n    const statusLabels = {\n      'siparis_kabul_edildi': '‚úÖ Sipari≈ü Kabul Edildi',\n      'siparis_reddedildi': '‚ùå Sipari≈ü Reddedildi',\n      'ek_bilgi_gerekli': '‚ÑπÔ∏è Ek Bilgi Gerekli',\n      'teslim_tarihi_deƒüi≈üti': 'üìÖ Teslim Tarihi Deƒüi≈üti',\n      'fiyat_teklifi': 'üí∞ Fiyat Teklifi'\n    };\n    return statusLabels[status] || status;\n  };\n\n    const loadOrder = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/orders/${id}`);\n      const apiOrder = response.data.data.order;\n      \n          const orderData = {\n        ...apiOrder,\n        timeline: apiOrder.timeline || [\n              {\n                id: 1,\n            type: 'created',\n                description: 'Sipari≈ü sisteme kaydedildi',\n            timestamp: apiOrder.createdAt,\n            user: apiOrder.createdBy ?\n              `${apiOrder.createdBy.firstName || ''} ${apiOrder.createdBy.lastName || ''}`.trim() ||\n              apiOrder.createdBy.username : 'Sistem'\n          }\n        ],\n        responses: apiOrder.responses || []\n      };\n      \n          setOrder(orderData);\n          setEditForm(orderData);\n        \n      // Debug: Timeline verilerini kontrol et\n      console.log('üé§ Order timeline data:', orderData.timeline);\n      const voiceEntries = orderData.timeline.filter(entry => entry.voiceRecording);\n      console.log('üé§ Timeline entries with voice recording:', voiceEntries);\n      } catch (error) {\n      console.error('Order load error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n  useEffect(() => {\n    loadOrder();\n  }, [id]);\n\n  // Socket.io real-time g√ºncellemeleri\n  useEffect(() => {\n    console.log('Socket useEffect √ßalƒ±≈ütƒ±:', { \n      socket: !!socket, \n      connected, \n      id,\n      socketId: socket?.id,\n      socketConnected: socket?.connected\n    });\n    \n    // Socket varsa event listener'larƒ± ekle\n    if (socket) {\n      console.log('Socket event listener\\'larƒ± ekleniyor...');\n      \n      // Sipari≈ü g√ºncellemelerini dinle\n      const handleOrderUpdated = (data) => {\n        console.log('üîî orderUpdated event alƒ±ndƒ±:', data);\n        console.log('üîç Kar≈üƒ±la≈ütƒ±rma:', { receivedId: data.orderId, currentId: id, match: data.orderId === id });\n        \n        if (data.orderId === id) {\n          console.log('‚úÖ Sipari≈ü g√ºncellendi, sayfa yenileniyor:', data);\n          // Sipari≈üi yeniden y√ºkle\n          loadOrder();\n          // Bildirimleri yenile\n          fetchNotifications();\n        } else {\n          console.log('‚ùå Farklƒ± sipari≈ü ID\\'si, g√ºncelleme yapƒ±lmƒ±yor');\n        }\n      };\n\n      // Yeni bildirimleri dinle\n      const handleNewNotification = (notification) => {\n        console.log('üîî newNotification event alƒ±ndƒ±:', notification);\n        // Bildirimleri yenile\n        fetchNotifications();\n      };\n\n      socket.on('orderUpdated', handleOrderUpdated);\n      socket.on('newNotification', handleNewNotification);\n\n      // Cleanup\n      return () => {\n        console.log('Socket event listener\\'larƒ± temizleniyor...');\n        socket.off('orderUpdated', handleOrderUpdated);\n        socket.off('newNotification', handleNewNotification);\n      };\n    } else {\n      console.log('Socket event listener\\'larƒ± eklenmedi - socket yok:', { \n        socket: !!socket, \n        connected, \n        socketConnected: socket?.connected \n      });\n    }\n  }, [socket, id]); // connected dependency'sini de kaldƒ±rdƒ±k\n\n  // Alternatif: Socket baƒülantƒ±sƒ± olmasa bile event listener'larƒ± ekle\n  useEffect(() => {\n    console.log('Alternatif Socket useEffect √ßalƒ±≈ütƒ±:', { \n      socket: !!socket, \n      connected, \n      id,\n      socketId: socket?.id,\n      socketConnected: socket?.connected\n    });\n    \n    // Socket varsa event listener'larƒ± ekle\n    if (socket) {\n      console.log('Alternatif Socket event listener\\'larƒ± ekleniyor...');\n      \n      // Sipari≈ü g√ºncellemelerini dinle\n      const handleOrderUpdated = (data) => {\n        console.log('Alternatif orderUpdated event alƒ±ndƒ±:', data);\n        console.log('Alternatif Kar≈üƒ±la≈ütƒ±rma:', { receivedId: data.orderId, currentId: id, match: data.orderId === id });\n        \n        if (data.orderId === id) {\n          console.log('Alternatif Sipari≈ü g√ºncellendi, sayfa yenileniyor:', data);\n          // Sipari≈üi yeniden y√ºkle\n          loadOrder();\n          // Bildirimleri yenile\n          fetchNotifications();\n        }\n      };\n\n      // Yeni bildirimleri dinle\n      const handleNewNotification = (notification) => {\n        console.log('Alternatif newNotification event alƒ±ndƒ±:', notification);\n        // Bildirimleri yenile\n        fetchNotifications();\n      };\n\n      socket.on('orderUpdated', handleOrderUpdated);\n      socket.on('newNotification', handleNewNotification);\n\n      // Cleanup\n      return () => {\n        console.log('Alternatif Socket event listener\\'larƒ± temizleniyor...');\n        socket.off('orderUpdated', handleOrderUpdated);\n        socket.off('newNotification', handleNewNotification);\n      };\n    }\n  }, [id]); // Sadece id dependency'si\n\n  const handleEdit = () => {\n    setIsEditing(true);\n    setEditForm({ ...order });\n  };\n\n  const handleSave = async () => {\n    try {\n      await api.put(`/orders/${id}`, editForm);\n      await loadOrder();\n      setIsEditing(false);\n    } catch (error) {\n      console.error('Update error:', error);\n    }\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n    setEditForm({ ...order });\n  };\n\n  // Ses kaydƒ± handler'larƒ±\n  const handleVoiceRecordingComplete = (audioBlob) => {\n    setVoiceRecording(audioBlob);\n    setHasVoiceRecording(true);\n  };\n\n  const handleVoiceRecordingDelete = () => {\n    setVoiceRecording(null);\n    setHasVoiceRecording(false);\n  };\n\n  const handleSendResponse = async () => {\n    if (!responseStatus) return;\n    \n    try {\n      setIsSendingResponse(true);\n      \n      // Debug log\n      console.log('üì§ Sending response:', {\n        status: responseStatus,\n        note: responseNote,\n        hasVoiceRecording: !!voiceRecording\n      });\n      \n      // Ses kaydƒ± varsa FormData, yoksa normal JSON g√∂nder\n      if (voiceRecording) {\n        // FormData olu≈ütur\n        const formData = new FormData();\n        formData.append('status', responseStatus);\n        formData.append('note', responseNote);\n        formData.append('voiceRecording', voiceRecording, 'voice-recording.webm');\n        \n        // FormData i√ßeriƒüini logla\n        console.log('üì§ FormData contents:');\n        for (let [key, value] of formData.entries()) {\n          console.log(`  ${key}:`, value);\n        }\n        \n        await api.post(`/orders/${id}/responses`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n      } else {\n        // Normal JSON g√∂nder\n        console.log('üì§ Sending JSON data:', { status: responseStatus, note: responseNote });\n        await api.post(`/orders/${id}/responses`, {\n          status: responseStatus,\n          note: responseNote\n        });\n      }\n      \n      // Form'u temizle\n      setResponseStatus('');\n      setResponseNote('');\n      setVoiceRecording(null);\n      setHasVoiceRecording(false);\n      \n      await loadOrder();\n      await fetchNotifications();\n    } catch (error) {\n      console.error('Send response error:', error);\n    } finally {\n      setIsSendingResponse(false);\n    }\n  };\n\n  const handleStatusUpdate = async (newStatus) => {\n    try {\n      await api.put(`/orders/${id}/status`, { status: newStatus });\n      await loadOrder();\n    } catch (error) {\n      console.error('Status update error:', error);\n      \n      // API hatasƒ± durumunda local olarak g√ºncelle\n      const updatedOrder = { ...order, status: newStatus };\n      setOrder(updatedOrder);\n      setEditForm(updatedOrder);\n      \n      // Add to timeline\n      const newTimelineEntry = {\n        id: order.timeline.length + 1,\n        status: newStatus,\n        title: `Durum ${newStatus} olarak g√ºncellendi`,\n        description: `Sipari≈ü durumu ${newStatus} olarak deƒüi≈ütirildi`,\n        timestamp: new Date().toISOString(),\n        user: 'Mevcut Kullanƒ±cƒ±'\n      };\n      updatedOrder.timeline.push(newTimelineEntry);\n      setOrder(updatedOrder);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <LoadingSpinner size=\"lg\" text=\"Sipari≈ü detaylarƒ± y√ºkleniyor...\" />\n      </div>\n    );\n  }\n\n  if (!order) {\n    return (\n      <div className=\"text-center py-12\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Sipari≈ü Bulunamadƒ±</h2>\n        <p className=\"text-gray-600 mb-6\">Aradƒ±ƒüƒ±nƒ±z sipari≈ü mevcut deƒüil.</p>\n        <Link to=\"/orders\">\n          <Button variant=\"primary\">Sipari≈ülere D√∂n</Button>\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n        {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Sipari≈ü Detayƒ±</h1>\n            <p className=\"text-gray-600 mt-2\">Sipari≈ü #{order.orderNumber || id}</p>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <Link to=\"/orders\">\n              <Button variant=\"secondary\">Geri D√∂n</Button>\n            </Link>\n            {canEdit && (\n              <div className=\"flex space-x-2\">\n                {isEditing ? (\n                  <>\n                <Button variant=\"primary\" onClick={handleSave}>\n                  Kaydet\n                </Button>\n                    <Button variant=\"secondary\" onClick={handleCancel}>\n                      ƒ∞ptal\n                    </Button>\n                  </>\n                ) : (\n                  <Button variant=\"primary\" onClick={handleEdit}>\n                    D√ºzenle\n                  </Button>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Status Badge */}\n        <div className=\"mt-4\">\n          <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\n            order.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\n            order.status === 'confirmed' ? 'bg-green-100 text-green-800' :\n            order.status === 'in_progress' ? 'bg-blue-100 text-blue-800' :\n            order.status === 'completed' ? 'bg-green-100 text-green-800' :\n            order.status === 'cancelled' ? 'bg-red-100 text-red-800' :\n            'bg-gray-100 text-gray-800'\n          }`}>\n            {order.status}\n          </span>\n        </div>\n      </div>\n\n      {/* 3 Column Layout */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\n        {/* Sol S√ºtun - Sipari≈ü Bilgileri (%25) */}\n        <div className=\"lg:col-span-3 space-y-6\">\n          {/* Sipari≈ü Bilgileri */}\n            <Card className=\"p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Sipari≈ü Bilgileri</h3>\n            <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    √úr√ºn\n                  </label>\n                  {isEditing ? (\n                    <Input\n                      value={editForm.product}\n                      onChange={(e) => setEditForm({...editForm, product: e.target.value})}\n                    />\n                  ) : (\n                  <p className=\"text-gray-900\">{order.product || '-'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    √úr√ºn Kodu\n                  </label>\n                <p className=\"text-gray-900\">{order.productCode || '-'}</p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Miktar\n                  </label>\n                  {isEditing ? (\n                    <Input\n                      type=\"number\"\n                      value={editForm.quantity}\n                      onChange={(e) => setEditForm({...editForm, quantity: parseInt(e.target.value)})}\n                    />\n                  ) : (\n                  <p className=\"text-gray-900\">{order.quantity || 0} adet</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Birim Fiyat\n                  </label>\n                <p className=\"text-gray-900\">‚Ç∫{order.unitPrice ? order.unitPrice.toFixed(2) : '0.00'}</p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Toplam Tutar\n                  </label>\n                <p className=\"text-gray-900\">‚Ç∫{order.totalAmount ? order.totalAmount.toFixed(2) : '0.00'}</p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Teslimat Tarihi\n                  </label>\n                    <p className=\"text-gray-900\">{formatDate(order.deliveryDate)}</p>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  A√ßƒ±klama\n                </label>\n                {isEditing ? (\n                  <textarea\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                    rows=\"3\"\n                    value={editForm.description}\n                    onChange={(e) => setEditForm({...editForm, description: e.target.value})}\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{order.description || '-'}</p>\n                )}\n              </div>\n              </div>\n            </Card>\n\n        </div>\n\n        {/* Orta S√ºtun - Sipari≈ü Ge√ßmi≈üi ve Bildirimler (%37.5) */}\n        <div className=\"lg:col-span-4\">\n            <Card className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Sipari≈ü Ge√ßmi≈üi</h3>\n              <div className=\"flex items-center space-x-2\">\n                <svg className=\"w-5 h-5 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-5 5v-5zM4.868 19.718A8.966 8.966 0 003 12a9 9 0 0118 0 8.966 8.966 0 00-1.868 7.718\" />\n                </svg>\n                <span className=\"text-sm text-gray-600\">Ger√ßek Zamanlƒ±</span>\n              </div>\n                </div>\n            <div className=\"space-y-4\">\n              {/* Sipari≈ü Ge√ßmi≈üi */}\n                <div>\n                <h4 className=\"text-sm font-medium text-gray-700 mb-3 flex items-center\">\n                  <svg className=\"w-4 h-4 mr-2 text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  Sipari≈ü Ge√ßmi≈üi\n                </h4>\n                <div className=\"space-y-3\">\n                  {order.timeline && order.timeline.length > 0 ? (\n                    order.timeline.map((entry, index) => {\n                      // Kullanƒ±cƒ± tipine g√∂re renk belirle\n              const isAdmin = entry.user === 'admin';\n              const hasVoiceRecording = entry.voiceRecording && entry.voiceRecording.filename;\n                      \n                      // Debug log\n                      if (hasVoiceRecording) {\n                        console.log('üé§ Timeline entry with voice recording:', entry);\n                      }\n                      \n                      return (\n                        <div key={entry.id || index} className={`flex space-x-3 p-3 rounded-lg ${\n                          isAdmin \n                            ? 'bg-blue-50 border-l-4 border-blue-400' \n                            : 'bg-green-50 border-l-4 border-green-400'\n                        }`}>\n                          <div className=\"flex-shrink-0\">\n                            <div className={`w-4 h-4 rounded-full flex items-center justify-center ${\n                              isAdmin \n                                ? hasVoiceRecording ? 'bg-blue-600' : 'bg-blue-500'\n                                : hasVoiceRecording ? 'bg-green-600' : 'bg-green-500'\n                            }`}>\n                      {hasVoiceRecording && entry.voiceRecording && entry.voiceRecording.filename ? (\n                        <svg className=\"w-2 h-2 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\" clipRule=\"evenodd\" />\n                        </svg>\n                      ) : (\n                        <div className=\"w-1.5 h-1.5 bg-white rounded-full\"></div>\n                      )}\n                </div>\n                </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className={`text-sm font-medium ${\n                              isAdmin ? 'text-blue-900' : 'text-green-900'\n                            }`}>{entry.description}</p>\n                            <p className={`text-xs ${\n                              isAdmin ? 'text-blue-600' : 'text-green-600'\n                            }`}>{formatDate(entry.timestamp)}</p>\n                          \n                          {/* Ses dosyasƒ± varsa g√∂ster */}\n                  {entry.voiceRecording && entry.voiceRecording.filename && (\n                    <VoicePlayer\n                      voiceRecording={entry.voiceRecording}\n                      userName={entry.user}\n                      timestamp={entry.timestamp}\n                    />\n                  )}\n                </div>\n              </div>\n                      );\n                    })\n                  ) : (\n                    <p className=\"text-sm text-gray-500 italic\">Hen√ºz ge√ßmi≈ü kaydƒ± yok</p>\n                  )}\n                  </div>\n              </div>\n              </div>\n            </Card>\n          </div>\n\n        {/* Saƒü S√ºtun - Sipari≈ü Cevap Sistemi (%37.5) */}\n        <div className=\"lg:col-span-5\">\n          {/* Durum ƒ∞≈ülemleri */}\n          <Card className=\"p-6 mb-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Durum ƒ∞≈ülemleri</h3>\n              <div className=\"space-y-3\">\n              {canEdit && (\n                  <Button \n                  variant=\"danger\"\n                    className=\"w-full\" \n                  onClick={() => handleStatusUpdate('cancelled')}\n                  >\n                    ƒ∞ptal Et\n                  </Button>\n                )}\n              </div>\n            </Card>\n\n          {/* Sipari≈ü Cevap Sistemi */}\n            <Card className=\"p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Sipari≈ü Cevap Sistemi</h3>\n            <div className=\"space-y-4\">\n              {/* Sipari≈üe Cevap Ver */}\n              <div>\n                <h4 className=\"font-medium text-gray-900 mb-3\">Sipari≈üe Cevap Ver</h4>\n                \n                {/* Durum Se√ßimi */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Durum Se√ßin\n                  </label>\n                  <select\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                    value={responseStatus}\n                    onChange={(e) => setResponseStatus(e.target.value)}\n                  >\n                    <option value=\"\">Durum se√ßin...</option>\n                    <option value=\"siparis_kabul_edildi\">‚úÖ Sipari≈ü Kabul Edildi</option>\n                    <option value=\"siparis_reddedildi\">‚ùå Sipari≈ü Reddedildi</option>\n                    <option value=\"ek_bilgi_gerekli\">‚ÑπÔ∏è Ek Bilgi Gerekli</option>\n                    <option value=\"teslim_tarihi_deƒüi≈üti\">üìÖ Teslim Tarihi Deƒüi≈üti</option>\n                    <option value=\"fiyat_teklifi\">üí∞ Fiyat Teklifi</option>\n                    <option value=\"not\">üìù NOT</option>\n                  </select>\n                    </div>\n\n                {/* Not Alanƒ± */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    {responseStatus === 'not' ? 'Not (Zorunlu)' : 'Not (Opsiyonel)'}\n                  </label>\n                  <textarea\n                    className=\"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                    rows=\"3\"\n                    placeholder=\"Sipari≈ü hakkƒ±nda notlarƒ±nƒ±zƒ± yazƒ±n...\"\n                    value={responseNote}\n                    onChange={(e) => setResponseNote(e.target.value)}\n                  />\n                  </div>\n\n                {/* Ses Kaydƒ± */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    üé§ Ses Kaydƒ± (Opsiyonel)\n                  </label>\n                  <VoiceRecorder\n                    onRecordingComplete={handleVoiceRecordingComplete}\n                    onRecordingDelete={handleVoiceRecordingDelete}\n                  />\n                  <p className=\"text-xs text-gray-500 mt-2\">\n                    Ses kaydƒ± ile daha detaylƒ± a√ßƒ±klama yapabilirsiniz. Hem yazƒ±lƒ± not hem de ses kaydƒ± g√∂nderebilirsiniz.\n                  </p>\n                </div>\n\n                {/* G√∂nder Butonu */}\n                <Button \n                  className=\"w-full\"\n                  variant=\"primary\"\n                  onClick={handleSendResponse}\n                  disabled={!responseStatus || isSendingResponse || (responseStatus === 'not' && !responseNote.trim() && !hasVoiceRecording)}\n                >\n                  {isSendingResponse ? 'G√∂nderiliyor...' : 'Cevabƒ± G√∂nder'}\n                  </Button>\n              </div>\n\n              </div>\n            </Card>\n          </div>\n        </div>\n    </div>\n  );\n};\n\nexport default OrderDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}