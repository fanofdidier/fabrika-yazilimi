"use strict";(self.webpackChunkfabrika_magaza_frontend=self.webpackChunkfabrika_magaza_frontend||[]).push([[919],{1919:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var s=t(2555),r=t(5043),l=t(5475),i=t(749),d=t(579);const n=()=>{const[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),[m,u]=(0,r.useState)("all"),[x,v]=(0,r.useState)("all");(0,r.useEffect)(()=>{(async()=>{n(!0);try{const e=(e=>{const a=[];return e.forEach((e,t)=>{const s=100*(t+1);a.push({id:s+1,title:"Malzeme Haz\u0131rl\u0131\u011f\u0131",description:"".concat(e.orderNumber," sipari\u015fi i\xe7in ").concat(e.productName," malzeme haz\u0131rl\u0131\u011f\u0131"),assignee:"Beklemede",assigneeEmail:"atama@fabrika.com",status:"completed"===e.status?"completed":"pending",priority:e.priority||"medium",category:"material",createdDate:e.createdAt,dueDate:e.deliveryDate,completedDate:"completed"===e.status?e.deliveryDate:null,orderId:e.id,orderNumber:e.orderNumber,estimatedHours:Math.ceil(e.quantity/10)||4,actualHours:null,progress:"completed"===e.status?100:0}),a.push({id:s+2,title:"\xdcretim \u0130\u015flemi",description:"".concat(e.orderNumber," - ").concat(e.productName," \xfcretim i\u015flemi"),assignee:"Beklemede",assigneeEmail:"uretim@fabrika.com",status:"completed"===e.status?"completed":"in_progress"===e.status?"in_progress":"pending",priority:e.priority||"high",category:"production",createdDate:e.createdAt,dueDate:e.deliveryDate,completedDate:"completed"===e.status?e.deliveryDate:null,orderId:e.id,orderNumber:e.orderNumber,estimatedHours:Math.ceil(e.quantity/5)||8,actualHours:null,progress:"completed"===e.status?100:"in_progress"===e.status?50:0}),a.push({id:s+3,title:"Kalite Kontrol",description:"".concat(e.orderNumber," sipari\u015fi i\xe7in kalite kontrol i\u015flemi"),assignee:"Beklemede",assigneeEmail:"kalite@fabrika.com",status:"completed"===e.status?"completed":"pending",priority:"high",category:"quality",createdDate:e.createdAt,dueDate:e.deliveryDate,completedDate:"completed"===e.status?e.deliveryDate:null,orderId:e.id,orderNumber:e.orderNumber,estimatedHours:2,actualHours:null,progress:"completed"===e.status?100:0})}),a})(JSON.parse(localStorage.getItem("orders")||"[]"));await new Promise(e=>setTimeout(e,500)),a(e)}catch(e){console.error("Tasks loading error:",e),a([])}finally{n(!1)}})()},[]);const p=e=>{const a={pending:{variant:"warning",text:"Beklemede"},in_progress:{variant:"primary",text:"\u0130\u015flemde"},completed:{variant:"success",text:"Tamamland\u0131"},overdue:{variant:"danger",text:"Gecikmi\u015f"},cancelled:{variant:"secondary",text:"\u0130ptal Edildi"}}[e]||{variant:"secondary",text:e};return(0,d.jsx)(i.Ex,{variant:a.variant,children:a.text})},g=e=>{const a={high:{variant:"danger",text:"Y\xfcksek"},medium:{variant:"warning",text:"Orta"},low:{variant:"success",text:"D\xfc\u015f\xfck"}}[e]||{variant:"secondary",text:e};return(0,d.jsx)(i.Ex,{variant:a.variant,size:"sm",children:a.text})},h=e=>new Date(e).toLocaleDateString("tr-TR"),y=(e,a)=>"completed"!==a&&new Date(e)<new Date,j=e.filter(e=>{var a,t,s;if(!e)return!1;const r=(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(o.toLowerCase()))||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(s=e.assignee)||void 0===s?void 0:s.toLowerCase().includes(o.toLowerCase()))||e.orderNumber&&e.orderNumber.toLowerCase().includes(o.toLowerCase()),l="all"===m||e.status===m,i="all"===x||e.priority===x;return r&&l&&i}),b=[{key:"title",header:"G\xf6rev",render:e=>(0,d.jsxs)("div",{children:[(0,d.jsx)(l.N_,{to:"/tasks/".concat((null===e||void 0===e?void 0:e.id)||""),className:"text-blue-600 hover:text-blue-800 font-medium",children:(null===e||void 0===e?void 0:e.title)||"Ba\u015fl\u0131ks\u0131z G\xf6rev"}),(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:null!==e&&void 0!==e&&e.description&&e.description.length>50?"".concat(e.description.substring(0,50),"..."):(null===e||void 0===e?void 0:e.description)||"A\xe7\u0131klama yok"}),(null===e||void 0===e?void 0:e.orderNumber)&&(0,d.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Sipari\u015f: ",e.orderNumber]})]})},{key:"assignee",header:"Atanan",render:e=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-gray-900",children:(null===e||void 0===e?void 0:e.assignee)||"Atanmam\u0131\u015f"}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:(null===e||void 0===e?void 0:e.assigneeEmail)||"-"})]})},{key:"category",header:"Kategori",render:e=>(e=>{const a={material:{variant:"primary",text:"Malzeme",icon:"\ud83d\udce6"},quality:{variant:"success",text:"Kalite",icon:"\u2705"},planning:{variant:"warning",text:"Planlama",icon:"\ud83d\udccb"},maintenance:{variant:"secondary",text:"Bak\u0131m",icon:"\ud83d\udd27"},shipping:{variant:"primary",text:"Sevkiyat",icon:"\ud83d\ude9a"},production:{variant:"primary",text:"\xdcretim",icon:"\u2699\ufe0f"}}[e]||{variant:"secondary",text:e,icon:"\ud83d\udcdd"};return(0,d.jsxs)(i.Ex,{variant:a.variant,size:"sm",children:[a.icon," ",a.text]})})((null===e||void 0===e?void 0:e.category)||"other")},{key:"status",header:"Durum",render:e=>(0,d.jsxs)("div",{className:"space-y-1",children:[p(y(null===e||void 0===e?void 0:e.dueDate,null===e||void 0===e?void 0:e.status)?"overdue":(null===e||void 0===e?void 0:e.status)||"pending"),g((null===e||void 0===e?void 0:e.priority)||"medium")]})},{key:"progress",header:"\u0130lerleme",render:e=>(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,d.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.progress)||0,"%"]}),(0,d.jsx)("span",{className:"text-gray-500",children:null!==e&&void 0!==e&&e.actualHours?"".concat(e.actualHours,"h"):"".concat((null===e||void 0===e?void 0:e.estimatedHours)||0,"h")})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"h-2 rounded-full ".concat(100===((null===e||void 0===e?void 0:e.progress)||0)?"bg-green-500":((null===e||void 0===e?void 0:e.progress)||0)>50?"bg-blue-500":((null===e||void 0===e?void 0:e.progress)||0)>0?"bg-yellow-500":"bg-gray-300"),style:{width:"".concat((null===e||void 0===e?void 0:e.progress)||0,"%")}})})]})},{key:"dates",header:"Tarihler",render:e=>(0,d.jsxs)("div",{className:"text-sm",children:[(0,d.jsxs)("div",{children:["Olu\u015fturulma: ",h(null===e||void 0===e?void 0:e.createdDate)||"-"]}),(0,d.jsxs)("div",{className:"".concat(y(null===e||void 0===e?void 0:e.dueDate,null===e||void 0===e?void 0:e.status)?"text-red-600 font-medium":"text-gray-500"),children:["Biti\u015f: ",h(null===e||void 0===e?void 0:e.dueDate)||"-"]}),(null===e||void 0===e?void 0:e.completedDate)&&(0,d.jsxs)("div",{className:"text-green-600",children:["Tamamlanma: ",h(e.completedDate)]})]})},{key:"actions",header:"\u0130\u015flemler",render:e=>(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)(l.N_,{to:"/tasks/".concat((null===e||void 0===e?void 0:e.id)||""),children:(0,d.jsx)(i.$n,{size:"sm",variant:"outline",children:"G\xf6r\xfcnt\xfcle"})}),"pending"===(null===e||void 0===e?void 0:e.status)&&(0,d.jsx)(i.$n,{size:"sm",variant:"primary",onClick:()=>N(null===e||void 0===e?void 0:e.id,"in_progress"),children:"Ba\u015flat"}),"in_progress"===(null===e||void 0===e?void 0:e.status)&&(0,d.jsx)(i.$n,{size:"sm",variant:"success",onClick:()=>N(null===e||void 0===e?void 0:e.id,"completed"),children:"Tamamla"})]})}],N=async(t,r)=>{try{const l=e.map(e=>{if(e.id===t){const a=(0,s.A)((0,s.A)({},e),{},{status:r});return"completed"===r?(a.completedDate=(new Date).toISOString(),a.progress=100):"in_progress"===r&&(a.progress=Math.max(a.progress,10)),a}return e});a(l)}catch(l){console.error("Status update error:",l)}},k=e.reduce((e,a)=>{const t=y(a.dueDate,a.status)?"overdue":a.status;return e[t]=(e[t]||0)+1,e},{});return t?(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsx)(i.kt,{size:"lg",text:"G\xf6revler y\xfckleniyor..."})}):(0,d.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"G\xf6rev Y\xf6netimi"}),(0,d.jsxs)("p",{className:"text-gray-600 mt-2",children:["Toplam ",e.length," g\xf6rev bulundu"]})]}),(0,d.jsx)(l.N_,{to:"/tasks/create",children:(0,d.jsx)(i.$n,{variant:"primary",children:"\ud83d\udccb Yeni G\xf6rev Olu\u015ftur"})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,d.jsx)(i.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg mr-3",children:(0,d.jsx)("span",{className:"text-yellow-600 text-xl",children:"\u23f3"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Beklemede"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.pending||0})]})]})}),(0,d.jsx)(i.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,d.jsx)("span",{className:"text-blue-600 text-xl",children:"\ud83d\udd04"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"\u0130\u015flemde"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.in_progress||0})]})]})}),(0,d.jsx)(i.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,d.jsx)("span",{className:"text-green-600 text-xl",children:"\u2705"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Tamamland\u0131"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.completed||0})]})]})}),(0,d.jsx)(i.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"p-2 bg-red-100 rounded-lg mr-3",children:(0,d.jsx)("span",{className:"text-red-600 text-xl",children:"\u26a0\ufe0f"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"Gecikmi\u015f"}),(0,d.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.overdue||0})]})]})})]}),(0,d.jsx)(i.Zp,{className:"p-6 mb-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arama"}),(0,d.jsx)(i.pd,{type:"text",placeholder:"G\xf6rev ad\u0131, a\xe7\u0131klama, atanan ki\u015fi ara...",value:o,onChange:e=>c(e.target.value)})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum Filtresi"}),(0,d.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:m,onChange:e=>u(e.target.value),children:[{value:"all",label:"T\xfcm Durumlar"},{value:"pending",label:"Beklemede"},{value:"in_progress",label:"\u0130\u015flemde"},{value:"completed",label:"Tamamland\u0131"},{value:"overdue",label:"Gecikmi\u015f"}].map(e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xd6ncelik Filtresi"}),(0,d.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:x,onChange:e=>v(e.target.value),children:[{value:"all",label:"T\xfcm \xd6ncelikler"},{value:"high",label:"Y\xfcksek"},{value:"medium",label:"Orta"},{value:"low",label:"D\xfc\u015f\xfck"}].map(e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})}),(0,d.jsx)(i.Zp,{children:(0,d.jsx)(i.XI,{data:j,columns:b,loading:t,emptyMessage:"G\xf6rev bulunamad\u0131"})})]})}}}]);
//# sourceMappingURL=919.e798a64e.chunk.js.map